<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kakao Demo Chat</title>

<style>

body{
margin:0;
background:#b2c7da;
font-family:system-ui;
}

.app{
max-width:430px;
height:100vh;
margin:auto;
display:flex;
flex-direction:column;
background:#b2c7da;
}

/* LOGIN */

.login{
flex:1;
display:flex;
flex-direction:column;
justify-content:center;
padding:25px;
}

.login input{
padding:12px;
margin-bottom:10px;
border:none;
border-radius:12px;
}

.login button{
padding:12px;
border:none;
border-radius:12px;
background:#fee500;
font-weight:bold;
}

/* HEADER */

.header{
padding:12px;
background:#a5c4dd;
text-align:center;
font-weight:bold;
}

/* CHAT */

.chatbox{
flex:1;
padding:10px;
overflow-y:auto;
display:flex;
flex-direction:column;
}

.msg{
max-width:75%;
padding:10px;
border-radius:15px;
margin:5px 0;
font-size:14px;
}

.me{
background:#fee500;
align-self:flex-end;
border-bottom-right-radius:0;
}

.you{
background:white;
align-self:flex-start;
border-bottom-left-radius:0;
}

.time{
font-size:10px;
opacity:.6;
text-align:right;
margin-top:3px;
}

/* INPUT */

.inputbar{
display:flex;
padding:7px;
background:#eee;
}

.inputbar input{
flex:1;
border:none;
border-radius:20px;
padding:10px;
}

.inputbar button{
margin-left:5px;
border:none;
border-radius:50%;
background:#fee500;
padding:10px 15px;
}

.notice{
background:#333;
color:white;
text-align:center;
padding:6px;
font-size:13px;
}

</style>
</head>

<body>

<div class="app">

<!-- LOGIN -->
<div id="login" class="login">
<h2>CHAT LOGIN</h2>
<input id="username" placeholder="ÎãâÎÑ§ÏûÑ">
<button onclick="login()">ENTER</button>
</div>

<!-- CHAT -->
<div id="chat" style="display:none">

<div class="header">CHAT ROOM</div>
<div id="notice" class="notice">üì¢ Í≥µÏßÄ : ÌôòÏòÅÌï©ÎãàÎã§</div>

<div id="chatbox" class="chatbox"></div>

<div class="inputbar">
<input type="file" id="file">
<input id="msg" placeholder="Î©îÏãúÏßÄ ÏûÖÎ†•">
<button onclick="send()">‚û§</button>
</div>

</div>

</div>

<script>

let user = "";
let chatData = JSON.parse(localStorage.getItem("chat")) || [];

// LOGIN

function login(){
 user = username.value;
 localStorage.setItem("user",user);

 login.style.display="none";
 chat.style.display="block";

 loadChat();
}

// SEND

function send(){

 const text = msg.value;
 if(text==="") return;

 chatData.push({
  name:user,
  msg:text,
  time:new Date().toLocaleTimeString()
 });

 localStorage.setItem("chat",JSON.stringify(chatData));
 msg.value="";
 loadChat();
}

// LOAD CHAT

function loadChat(){

 chatbox.innerHTML="";

 chatData.forEach(data=>{

  const div = document.createElement("div");
  div.className = "msg "+(data.name===user?"me":"you");

  div.innerHTML = `
   <b>${data.name}</b><br>
   ${data.msg}
   <div class="time">${data.time}</div>
  `;

  chatbox.appendChild(div);
 });

 chatbox.scrollTop = chatbox.scrollHeight;
}

</script>

</body>
</html>
